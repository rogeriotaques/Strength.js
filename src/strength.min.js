/*!
 * strength.js
 * 
 * Original author: @aaronlumsden
 * Further changes, comments: @aaronlumsden
 * 
 * Enhanced by Rogerio Taques (rogerio.taques@gmail.com)
 * Added new default options which include the ability to translate labels and password strengths.
 * Changed options parameters becoming it more intuitive.
 * 
 * Version: custom 1.0
 * 
 * Licensed under the MIT license
 */
!function($,window,document){function Plugin(element,options){this.element=element,this.$elem=$(this.element),this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="strength",defaults={targetClass:"strength",strengthMeterClass:"strength_meter",showPasswordButtonClass:"show_password_strength",texts:{showPassword:"Show Password",hidePassword:"Hide Password",strengthInitialLabel:"Strength",strengthVeryWeakLabel:"Very weak",strengthWeakLabel:"Weak",strengthMediumLabel:"Medium",strengthStrongLabel:"Strong"}};Plugin.prototype={init:function(){function getPercentage(a,b){return b/a*100}function checkStrength(thisval,thisid,thisopts){if(thisval.length){characters=thisval.length>8?1:-1,capitalletters=thisval.match(upperCase)?1:0,loweletters=thisval.match(lowerCase)?1:0,number=thisval.match(numbers)?1:0,special=thisval.match(specialchars)?1:0;{var total=characters+capitalletters+loweletters+number+special;getPercentage(5,total).toFixed(0)}}else total=-1;getTotal(total,thisid,thisopts)}function getTotal(total,thisid,thisopts){var thismeter=$('div[data-meter="'+thisid+'"].'+thisopts.strengthMeterClass);thismeter.removeClass("veryweak weak medium strong"),1>=total?thismeter.addClass("veryweak").find("div.meter_label").html(thisopts.texts.strengthVeryWeakLabel):2==total?thismeter.addClass("weak").find("div.meter_label").html(thisopts.texts.strengthWeakLabel):3==total?thismeter.addClass("medium").find("div.meter_label").html(thisopts.texts.strengthMediumLabel):thismeter.addClass("strong").find("div.meter_label").html(thisopts.texts.strengthStrongLabel),-1==total&&thismeter.removeClass("veryweak weak medium strong").find("div.meter_label").html(thisopts.texts.strengthInitialLabel)}var $this=this,characters=0,capitalletters=0,loweletters=0,number=0,special=0,upperCase=new RegExp("[A-Z]"),lowerCase=new RegExp("[a-z]"),numbers=new RegExp("[0-9]"),specialchars=new RegExp("([!,%,&,@,#,$,^,*,?,_,~])"),isShown=!1,thisid=(this.options.texts.showPasswordPassword,this.options.texts.hidePassword,this.$elem.attr("id")),thisval="";this.$elem.addClass(this.options.targetClass).attr("data-password",thisid).after('<a data-password-button="'+thisid+'" href="#" class="'+$this.options.showPasswordButtonClass+'">'+$this.options.texts.showPassword+'</a><div class="'+$this.options.strengthMeterClass+'" data-meter="'+thisid+'" ><div class="meter_progress" ></div><div class="meter_label" >'+$this.options.texts.strengthInitialLabel+"</div></div>"),this.$elem.on("keyup keydown",function(){thisval=$("#"+thisid).val(),checkStrength(thisval,thisid,$this.options)}),$(document.body).on("click","."+this.options.showPasswordButtonClass,function(e){e.preventDefault();"hide_"+$(this).attr("class");$("#"+thisid).attr("type",isShown?"password":"text"),isShown=!isShown})},yourOtherFunction:function(){}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);